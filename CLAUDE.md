# CLAUDE.md - PowerTrader AI

## 1. Project Overview
**PowerTrader AI** is a local, multi-process algorithmic trading system that uses a "Memory-based" pattern matching algorithm to predict price movements.
- **Data Source:** KuCoin (via `kucoin-python` or REST) for market data.
- **Execution:** Robinhood Crypto API (via `requests` + `cryptography` Ed25519 signing).
- **Architecture:** A central GUI (`pt_hub.py`) orchestrates three independent subprocesses (`thinker`, `trader`, `trainer`) which communicate exclusively via **File-based IPC**.

## 2. Core Commands
Run these commands from the project root.

### Operational
- **Start GUI (Main Entry):** `python pt_hub.py`
  - *Launches the Hub, which manages the lifecycle of Thinker and Trader.*
- **Run Components Manually (Debug):**
  - Neural Runner: `python pt_thinker.py`
  - Execution Engine: `python pt_trader.py`
  - Trainer (Specific Coin): `python pt_trainer.py BTC`
- **Install Dependencies:** `pip install -r requirements.txt`

### Setup & Config
- **API Keys:** Requires `r_key.txt` (API Key) and `r_secret.txt` (Base64 Private Key) in the project root.
  - *Generate these via the Hub's "Settings > Robinhood API > Setup Wizard".*
- **Settings:** Stored in `gui_settings.json` (auto-generated by Hub).

## 3. Architecture & IPC Patterns
The system relies on strict file-based Inter-Process Communication (IPC).

### Directory Structure
- **Root (`./`)**: Contains scripts and `BTC` data.
- **Hub Data (`./hub_data/`)**: Shared state for GUI visualization (`trader_status.json`, `trade_history.jsonl`).
- **Coin Folders (`./ETH/`, `./DOGE/`)**: specific neural data for altcoins. `BTC` uses the root directory.

### Communication Files
- **Signals (Thinker → Trader):** `long_dca_signal.txt` / `short_dca_signal.txt` (Integer 0-7).
- **Status (Trader → Hub):** `hub_data/trader_status.json` (Real-time snapshot).
- **Boundaries (Thinker → Hub):** `low_bound_prices.html`, `high_bound_prices.html` (Price levels).

## 4. Coding Standards & Best Practices

### File I/O (Critical)
- **Atomic Writes:** NEVER write JSON state files directly. Write to `filename.json.tmp`, then `os.replace()` to avoid race conditions.
  ```python
  def _atomic_write(path, data):
      tmp = f"{path}.tmp"
      with open(tmp, "w") as f: json.dump(data, f)
      os.replace(tmp, path)
